-- Create database for products
CREATE DATABASE IF NOT EXISTS products_db;

-- Use the database
USE products_db;

-- Drop table if exists
DROP TABLE IF EXISTS product;

-- Create the table with AUTO_INCREMENT starting from 1
CREATE TABLE product (
    id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    brand VARCHAR(255),
    price DECIMAL(10,2),
    category VARCHAR(255),
    release_date DATE,
    product_available TINYINT(1),
    stock_quantity INT,
    image_name VARCHAR(255),
    image_type VARCHAR(100),
    image_data LONGBLOB
) AUTO_INCREMENT = 1;

-- Optional: truncate before adding new products (resets AUTO_INCREMENT)
TRUNCATE TABLE product;


-- Insert Data
INSERT INTO product
(
    name,
    description,
    brand,
    price,
    category,
    release_date,
    product_available,
    stock_quantity,
    image_name,
    image_type,
    image_data
)
VALUES
(
    'Sample Product',
    'This is a sample product description.',
    'SampleBrand',
    199.99,
    'Electronics',
    '2026-01-16',
    1,
    50,
    'sample.jpg',
    'image/jpeg',
    UNHEX('FFD8FFE0') -- small dummy JPEG header in hex
);

-- Verify Table and Data
SHOW TABLES;
DESCRIBE product;
SELECT * FROM product;
-- Drop Table and Schema
TRUNCATE TABLE product;
DROP TABLE IF EXISTS product;
DROP DATABASE IF EXISTS products_db;
ALTER TABLE product AUTO_INCREMENT = 1;

-- Delete All tables
DROP TABLE IF EXISTS order_items;
DROP TABLE IF EXISTS orders;
DROP TABLE IF EXISTS product;
